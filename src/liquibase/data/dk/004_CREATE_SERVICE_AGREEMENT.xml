<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="1" author="aru" runOnChange="true">

        <comment>Create_Service_agreement</comment>

        <sql>
            --create shared service agreement under Scalepoint
            declare @insCompanyId int = (select ICRFNBR from InsComp where CompanyCode = 'SCALEPOINT')

            --map this agreement to all ICs
            Declare @targetInsCompCodes table (InsCompCode varchar(200)
            )

            insert @targetInsCompCodes values
            ('FUTURE50'), (' FUTURE51'), ( 'FUTURE52'), ('FUTURE53'),
            ('FUTURE54'), (' FUTURE55'), ( 'FUTURE56'), ('FUTURE57'),
            ('FUTURE58'), (' FUTURE59'), ( 'FUTURE60')


            declare @targetInsCompCodesList varchar(max) = (select * from @targetInsCompCodes)


            EXEC autotests_create_service_agreements @insCompanyId, 'serviceAgreement_autotests', 'serviceAgreement_NameWizzard',@targetInsCompCodesList


        </sql>
    </changeSet>
</databaseChangeLog>